<UserControl x:Class="TeensyRom.Ui.Features.Settings.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
             xmlns:core="clr-namespace:TeensyRom.Core.Storage.Entities;assembly=TeensyRom.Core"
             xmlns:local="clr-namespace:TeensyRom.Ui.Features.Settings"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="55"/>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="30"></RowDefinition>
                    <RowDefinition Height="80"></RowDefinition>                    
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="165"></ColumnDefinition>
                    <ColumnDefinition Width="10"></ColumnDefinition>
                    <ColumnDefinition Width="300"></ColumnDefinition>
                    <ColumnDefinition Width="10"></ColumnDefinition>
                    <ColumnDefinition Width="165"></ColumnDefinition>
                    <ColumnDefinition Width="10"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>

                </Grid.ColumnDefinitions>

                <ContentControl 
                    Content="{Binding Title}" 
                    Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="1" Margin="0 0 0 10"/>

                <Label Grid.Row="1" Style="{StaticResource Heading}">General Settings</Label>

                <Label 
                    Content="Nav to Dir on Launch:"
                    ToolTip="In Discover view, when clicking on Next / Previous or during continuous play, &#x0a;you will automatically be taken to the directory for the launched item."
                    Grid.Row="2" HorizontalAlignment="Right"/>

                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="In Discover view, when clicking on Next / Previous or during continuous play, &#x0a;you will automatically be taken to the directory for the launched item."
                    IsChecked="{Binding NavToDirOnLaunch, Mode=TwoWay}" 
                    Grid.Row="2" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Auto-Launch on Copy:"
                    ToolTip="When files are copied to the TR with drag and drop or the watch directory, &#x0a;the first file from the set will automatically launch."
                    Grid.Row="3" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="When files are copied to the TR with drag and drop or the watch directory, &#x0a;the first file from the set will automatically launch."
                    IsChecked="{Binding AutoLaunchOnCopyEnabled, Mode=TwoWay}" 
                    Grid.Row="3" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="File Auto-Transfer:"
                    ToolTip="Enabling auto-transfer will watch for files in the specified directory below.  &#x0a;If a file is detected, it will automatically be transferred to /auto-transfer/[media type]."
                    Grid.Row="4" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="Enabling auto-transfer will watch for files in the specified directory below.  &#x0a;If a file is detected, it will automatically be transferred to /auto-transfer/[media type]."
                    IsChecked="{Binding AutoFileCopyEnabled, Mode=TwoWay}" 
                    Grid.Row="4" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Watch Directory:" 
                    ToolTip="The folder specified here will be monitored for new files. &#x0a;Try setting it something like your browser download folder.  &#x0a;Only types supported by the TR be monitored."
                    Grid.Row="5" HorizontalAlignment="Right"/>

                <TextBox 
                    ToolTip="The folder specified here will be monitored for new files. &#x0a;Try setting it something like your browser download folder.  &#x0a;Only types supported by the TR be monitored."
                    materialDesign:HintAssist.Hint="Watch Directory"
                    materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                    Text="{Binding WatchDirectoryLocation, Mode=TwoWay}"                
                    Grid.Row="5" Grid.Column="2" VerticalAlignment="Top"/>

                <Label 
                    Content="Play Timer Auto-Enabled:"
                    ToolTip="This will enable the Games/Programs/Images play timer automatically when you first start the app."
                    Grid.Row="6" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="This will enable the Games/Programs/Images play timer automatically when you first start the app."
                    IsChecked="{Binding PlayTimerEnabled, Mode=TwoWay}" 
                    Grid.Row="6" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Auto-Connect on Startup:"
                    ToolTip="The application will automatically connect to TeensyROM on startup."
                    Grid.Row="7" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="The application will automatically connect to TeensyROM on startup."
                    IsChecked="{Binding AutoConnectEnabled, Mode=TwoWay}" 
                    Grid.Row="7" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Auto-Launch on Startup:"
                    ToolTip="The application will automatically launch a file on startup.&#x0a;File type is based on the Default Filter selected."
                    Grid.Row="8" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="The application will automatically launch a file on startup.&#x0a;File type is based on the Default Filter selected."
                    IsChecked="{Binding StartupLaunchEnabled, Mode=TwoWay}" 
                    Grid.Row="8" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Mute on Fast Forward :"
                    ToolTip="The SID voices will be muted when fast forwarding a song."
                    Grid.Row="9" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="The SID voices will be muted when fast forwarding a song."
                    IsChecked="{Binding MuteFastForward, Mode=TwoWay}" 
                    Grid.Row="9" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Mute on Random Seek:"
                    ToolTip="The SID voices will be muted when random seeking a song."
                    Grid.Row="10" HorizontalAlignment="Right"/>
                <CheckBox                  
                    Content="Enabled"                
                    ToolTip="The SID voices will be muted when random seeking a song."
                    IsChecked="{Binding MuteRandomSeek, Mode=TwoWay}" 
                    Grid.Row="10" Grid.Column="2" VerticalAlignment="Top" Margin="0 4 0 0"/>

                <Label 
                    Content="Default Filter:"
                    ToolTip="This will set the default startup filter"
                    Grid.Row="11" HorizontalAlignment="Right"/>

                <ComboBox 
                    Grid.Row="11" Grid.Column="2"
                    x:Name="FilterComboBox"
                    ItemsSource="{Binding FilterOptions}"
                    SelectedItem="{Binding StartupFilter, Mode=TwoWay}"            
                    FontFamily="Arial"
                    materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                    materialDesign:HintAssist.HelperTextFontSize="12"
                    ToolTip="This will set the default startup filter"
                    Width="75"
                    HorizontalAlignment="Left"
                    Margin="0 -13 0 0"/>


                <Label Grid.Column="4" Grid.Row="1" Style="{StaticResource Heading}">MIDI Control Mappings</Label>

                <Label IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}" Grid.Column="4" Grid.Row="2" HorizontalAlignment="Right" ToolTip="Adjusts the play speed of the song by +-1%. &#x0a;• Your home speed will reset back to the songs original speed.">Set Speed +-1%:</Label>

                <StackPanel Grid.Column="6" Grid.Row="2" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}" Orientation="Horizontal">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeed.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI device to map speed to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeed.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map speed to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="22 0 0 0">CC:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeed.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI CC to map speed to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.CurrentSpeed}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.CurrentSpeed}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="3"  HorizontalAlignment="Right" ToolTip="Adjusts the play speed of the song by +-0.1%. &#x0a;• Your home speed will reset back to the songs original speed." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Set Speed +-0.1%:</Label>

                <StackPanel Grid.Column="6" Grid.Row="3" Orientation="Horizontal" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeedFine.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI device to map speed to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeedFine.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map speed to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="22 0 0 0">CC:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.CurrentSpeedFine.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI CC to map speed to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.CurrentSpeedFine}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.CurrentSpeedFine}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="4" HorizontalAlignment="Right" ToolTip="Toggles the speed of the playing song +50%.&#x0a;• If the song is at -50%, this will set it back to the home speed." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Jump Speed +50%:</Label>

                <StackPanel Grid.Column="6" Orientation="Horizontal" Grid.Row="4" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedPlus50.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI device to map the +50% speed toggle to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedPlus50.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map the +50% speed toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}"
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedPlus50.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI Note # to map the +50% speed toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.SetSpeedPlus50}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.SetSpeedPlus50}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="5"  HorizontalAlignment="Right" ToolTip="Jumps to a fixed -50% from current speed. &#x0a;•Pressing home will take you back to your orginal (home) speed.&#x0a;•Pressing +50% will also take you back home." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Jump Speed -50%:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="5" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedMinus50.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI device to map the -50% speed toggle to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedMinus50.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map the -50% speed toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.SetSpeedMinus50.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI Note # to map the -50% speed toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.SetSpeedMinus50}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.SetSpeedMinus50}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="6"  HorizontalAlignment="Right" ToolTip="Home speed is .&#x0a;• Otherwise, it's 0." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Home Speed:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="6" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.HomeSpeed.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI channel to map the home speed toggle to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.HomeSpeed.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI channel to map the home toggle to." 
                        materialDesign:HintAssist.Hint="Ch"
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.HomeSpeed.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI Note # to map the home speed toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.HomeSpeed}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.HomeSpeed}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="7"  HorizontalAlignment="Right" ToolTip="Nudges the speed of the song forward for a brief burst to assist with beat matching.  Will remain engaged if you hold the note." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Nudge Forward 5%:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="7" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeForward.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI channel to map the nudge forward to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeForward.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI channel to map the nudge forward to." 
                        materialDesign:HintAssist.Hint="Ch"
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" 
                        materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeForward.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI Note # to map the nudge forward to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.NudgeForward}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.NudgeForward}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="8"  HorizontalAlignment="Right" ToolTip="Nudges the speed of the song backward for a brief burst to assist with beat matching.  Will remain engaged if you hold the note." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Nudge Backward 5%:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="8" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeBackward.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI channel to map the nudge backward to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeBackward.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI channel to map the nudge backward to." 
                        materialDesign:HintAssist.Hint="Ch"
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" 
                        materialDesign:HintAssist.Hint="Val"
                        SelectedItem="{Binding LastCart.MidiSettings.NudgeBackward.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI Note # to map the nudge backward to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.NudgeBackward}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.NudgeBackward}">Clear</Button>

                </StackPanel>



                <Label Grid.Column="4" Grid.Row="9" HorizontalAlignment="Right" ToolTip="Toggles mute for voice 1 of the playing song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Toggle Voice 1:</Label>

                <StackPanel Grid.Column="6" Grid.Row="9" Orientation="Horizontal" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">
                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice1Toggle.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Midi Device"
                        ToolTip="Select a MIDI device to map the voice 1 toggle to." 
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice1Toggle.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map the voice 1 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.Voice1Toggle.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map the voice 1 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice1Toggle}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice1Toggle}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="10"  HorizontalAlignment="Right" ToolTip="Toggles mute for voice 2 of the playing song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Toggle Voice 2:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="10" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice2Toggle.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI device to map the voice 2 toggle to." 
                        materialDesign:HintAssist.Hint="Midi Device"
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice2Toggle.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI channel to map the voice 2 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.Voice2Toggle.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map the voice 2 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice2Toggle}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice2Toggle}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="11"  HorizontalAlignment="Right" ToolTip="Toggles mute for voice 3 of the playing song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Toggle Voice 3:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="11" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice3Toggle.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI device to map the voice 3 toggle to." 
                        materialDesign:HintAssist.Hint="Midi Device"
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.Voice3Toggle.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI Channel to map the voice 3 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.Voice3Toggle.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map the voice 3 toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice3Toggle}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice3Toggle}">Clear</Button>

                </StackPanel>
                
                <Label Grid.Column="4" Grid.Row="12" HorizontalAlignment="Right" ToolTip="Mutes for voice 1 of the playing song while holding the note.  Like a kill switch." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Kill Voice 1:</Label>

<StackPanel Grid.Column="6" Grid.Row="12" Orientation="Horizontal" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">
    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice1Kill.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Midi Device"
        ToolTip="Select a MIDI device to map the voice 1 kill to." 
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice1Kill.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI channel to map the voice 1 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Voice1Kill.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map the voice 1 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice1Kill}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice1Kill}">Clear</Button>

</StackPanel>

<Label Grid.Column="4" Grid.Row="13"  HorizontalAlignment="Right" ToolTip="Mutes for voice 2 of the playing song while holding the note.  Like a kill switch." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Kill Voice 2:</Label>

<StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="13" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice2Kill.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI device to map the voice 2 kill to." 
        materialDesign:HintAssist.Hint="Midi Device"
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice2Kill.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI channel to map the voice 2 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Voice2Kill.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map the voice 2 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice2Kill}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice2Kill}">Clear</Button>

</StackPanel>

<Label Grid.Column="4" Grid.Row="14"  HorizontalAlignment="Right" ToolTip="Mutes for voice 3 of the playing song while holding the note.  Like a kill switch." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Kill Voice 3:</Label>

<StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="14" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice3Kill.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI device to map the voice 3 kill to." 
        materialDesign:HintAssist.Hint="Midi Device"
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Voice3Kill.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI Channel to map the voice 3 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Voice3Kill.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map the voice 3 kill to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice3Kill}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Voice3Kill}">Clear</Button>

</StackPanel>

                <Label Grid.Column="4" Grid.Row="15"  HorizontalAlignment="Right" ToolTip="Allows you to move to a random point in the song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Random Seek:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="15" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.Seek.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI device to map seek to." 
                        materialDesign:HintAssist.Hint="Midi Device"
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.Seek.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI Channel to map seek to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="22 0 0 0">CC:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.Seek.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map seek toggle to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Seek}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Seek}">Clear</Button>

                </StackPanel>

                <Label Grid.Column="4" Grid.Row="16"  HorizontalAlignment="Right" ToolTip="Toggles between random and directory mode." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Toggle Shuffle Mode:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="16" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.Mode.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI device to map mode to." 
                        materialDesign:HintAssist.Hint="Midi Device"
                        Width="150"
                        Margin="0 -3 0 0"/>

                    <Label Margin="10 0 0 0">Channel:</Label>

                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.Mode.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI Channel to map mode to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Label Margin="10 0 0 0">Note:</Label>

                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.Mode.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map restart mode to." 
                        Width="50"
                        Margin="10 -3 0 0"/>

                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Mode}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Mode}">Clear</Button>

                </StackPanel>
                
                <Label Grid.Column="4" Grid.Row="17"  HorizontalAlignment="Right" ToolTip="Play/Pause the song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Play / Pause:</Label>

                <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="17" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">
                
                    <ComboBox                
                        ItemsSource="{Binding AvailableDevices}"
                        SelectedItem="{Binding LastCart.MidiSettings.PlayPause.Device, Mode=TwoWay}" 
                        SelectedValuePath="Name"
                        DisplayMemberPath="Name"
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI device to map play / pause to." 
                        materialDesign:HintAssist.Hint="Midi Device"
                        Width="150"
                        Margin="0 -3 0 0"/>
                
                    <Label Margin="10 0 0 0">Channel:</Label>
                
                    <ComboBox                
                        ItemsSource="{Binding MidiChannels}"
                        SelectedItem="{Binding LastCart.MidiSettings.PlayPause.MidiChannel, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        materialDesign:HintAssist.Hint="Ch"
                        ToolTip="Select a MIDI Channel to map play / pause to." 
                        Width="50"
                        Margin="10 -3 0 0"/>
                
                    <Label Margin="10 0 0 0">Note:</Label>
                
                    <ComboBox                
                        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                        SelectedItem="{Binding LastCart.MidiSettings.PlayPause.Value, Mode=TwoWay}" 
                        FontFamily="Arial"
                        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                        materialDesign:HintAssist.HelperTextFontSize="12"
                        ToolTip="Select a MIDI note # to map play / pause to." 
                        Width="50"
                        Margin="10 -3 0 0"/>
                
                    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.PlayPause}">Learn</Button>
                    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.PlayPause}">Clear</Button>
                
                </StackPanel>
                
                <Label Grid.Column="4" Grid.Row="18"  HorizontalAlignment="Right" ToolTip="Fast forwards the song. 3 speeds." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Fast Forward:</Label>

               <StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="18" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

                   <ComboBox                
                       ItemsSource="{Binding AvailableDevices}"
                       SelectedItem="{Binding LastCart.MidiSettings.FastForward.Device, Mode=TwoWay}" 
                       SelectedValuePath="Name"
                       DisplayMemberPath="Name"
                       FontFamily="Arial"
                       materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                       materialDesign:HintAssist.HelperTextFontSize="12"
                       ToolTip="Select a MIDI device to map fast forward to." 
                       materialDesign:HintAssist.Hint="Midi Device"
                       Width="150"
                       Margin="0 -3 0 0"/>

                   <Label Margin="10 0 0 0">Channel:</Label>

                   <ComboBox                
                       ItemsSource="{Binding MidiChannels}"
                       SelectedItem="{Binding LastCart.MidiSettings.FastForward.MidiChannel, Mode=TwoWay}" 
                       FontFamily="Arial"
                       materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                       materialDesign:HintAssist.HelperTextFontSize="12"
                       materialDesign:HintAssist.Hint="Ch"
                       ToolTip="Select a MIDI Channel to map fast forward to." 
                       Width="50"
                       Margin="10 -3 0 0"/>

                   <Label Margin="10 0 0 0">Note:</Label>

                   <ComboBox                
                       ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
                       SelectedItem="{Binding LastCart.MidiSettings.FastForward.Value, Mode=TwoWay}" 
                       FontFamily="Arial"
                       materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
                       materialDesign:HintAssist.HelperTextFontSize="12"
                       ToolTip="Select a MIDI note # to map fast forward to." 
                       Width="50"
                       Margin="10 -3 0 0"/>

                   <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.FastForward}">Learn</Button>
                   <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.FastForward}">Clear</Button>

               </StackPanel>
                
                 <Label Grid.Column="4" Grid.Row="19"  HorizontalAlignment="Right" ToolTip="Next Song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Previous:</Label>

<StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="19" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Previous.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI device to map previous to." 
        materialDesign:HintAssist.Hint="Midi Device"
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Previous.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI Channel to map previous to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Previous.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map previous to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Previous}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Previous}">Clear</Button>

</StackPanel>
                
<Label Grid.Column="4" Grid.Row="20"  HorizontalAlignment="Right" ToolTip="Next Song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Next:</Label>

<StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="20" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Next.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI device to map next to." 
        materialDesign:HintAssist.Hint="Midi Device"
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Next.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI Channel to map next to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Next.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map next to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Next}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Next}">Clear</Button>

</StackPanel>
                
<Label Grid.Column="4" Grid.Row="21"  HorizontalAlignment="Right" ToolTip="Restarts the current song." IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">Restart Song:</Label>
                
<StackPanel Orientation="Horizontal" Grid.Column="6" Grid.Row="21" IsEnabled="{Binding MidiConfigEnabled, Mode=TwoWay}">

    <ComboBox                
        ItemsSource="{Binding AvailableDevices}"
        SelectedItem="{Binding LastCart.MidiSettings.Restart.Device, Mode=TwoWay}" 
        SelectedValuePath="Name"
        DisplayMemberPath="Name"
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI device to map restart to." 
        materialDesign:HintAssist.Hint="Midi Device"
        Width="150"
        Margin="0 -3 0 0"/>

    <Label Margin="10 0 0 0">Channel:</Label>

    <ComboBox                
        ItemsSource="{Binding MidiChannels}"
        SelectedItem="{Binding LastCart.MidiSettings.Restart.MidiChannel, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        materialDesign:HintAssist.Hint="Ch"
        ToolTip="Select a MIDI Channel to map restart to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Label Margin="10 0 0 0">Note:</Label>

    <ComboBox                
        ItemsSource="{Binding PossibleNoteOrCCValues}" materialDesign:HintAssist.Hint="Val" 
        SelectedItem="{Binding LastCart.MidiSettings.Restart.Value, Mode=TwoWay}" 
        FontFamily="Arial"
        materialDesign:TextFieldAssist.UnderlineBrush="{StaticResource EnabledColor}"
        materialDesign:HintAssist.HelperTextFontSize="12"
        ToolTip="Select a MIDI note # to map restart to." 
        Width="50"
        Margin="10 -3 0 0"/>

    <Button Width="65" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding BindMidiCommand}" CommandParameter="{Binding LastCart.MidiSettings.Restart}">Learn</Button>
    <Button Width="60" Height="20" FontSize="12" Margin="15 0 0 0" Command="{Binding ClearMidiBindCommand}" CommandParameter="{Binding LastCart.MidiSettings.Restart}">Clear</Button>

</StackPanel>
                <TextBlock Grid.Row="23" Grid.Column="4" Grid.ColumnSpan="3" Margin="0 20 0 0" Visibility="{Binding MidiConfigUnavailable, Converter={StaticResource BooleanToVisibilityConverter}, Mode=TwoWay}">MIDI settings are configured per TR device.  Connect to a TR to unlock MIDI.</TextBlock>
                <StackPanel Grid.Row="23" Grid.Column="4" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Left" Height="60" Visibility="{Binding MidiConfigUnavailable, Converter={StaticResource InverseBooleanToVisibilityConverter}, Mode=TwoWay}">
                    
                    <Button             
                        ToolTip="This will refresh the MIDI mapping list if devices were not previously found."
                        Content="Refresh Midi"  
                        Command="{Binding RefreshMidiDevicesCommand}" 
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Grid.ColumnSpan="3" Width="150" Margin="10"/>
                    <CheckBox                  
                        x:Name="MidiEnabledCheckBox"
                        Content="Midi Enabled"                
                        ToolTip="Enables MIDI support."
                        IsChecked="{Binding LastCart.MidiSettings.MidiEnabled, Mode=TwoWay}" 
                        VerticalAlignment="Center" Margin="0 4 0 0"
                        Checked="MidiEnabledCheckBox_Checked"
                        Unchecked="MidiEnabledCheckBox_Unchecked"/>

                </StackPanel>
                
                <Button   
                    Grid.Row="22" Grid.Column="0" 
                    ToolTip="This will save your settings to disk."
                    Content="Save Settings"  
                    Command="{Binding SaveSettingsCommand}" 
                    HorizontalAlignment="Left"
                    Width="150" Margin="10"/>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>
