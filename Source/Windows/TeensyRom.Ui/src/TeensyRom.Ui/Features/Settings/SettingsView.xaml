<UserControl x:Class="TeensyRom.Ui.Features.Settings.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:TeensyRom.Ui.Features.Settings"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             DataContext="{Binding}">

    <UserControl.Resources>
        <DataTemplate x:Key="CCMappingTemplate">
            <local:CCMappingView/>
        </DataTemplate>
        <DataTemplate x:Key="DualNoteMappingTemplate">
            <local:DualNoteMappingView/>
        </DataTemplate>
        <DataTemplate x:Key="NoteMappingTemplate">
            <local:NoteMappingView/>
        </DataTemplate>
        <local:MidiMappingTemplateSelector x:Key="MidiMappingTemplateSelector"
                                           NoteMappingTemplate="{StaticResource NoteMappingTemplate}"
                                           DualNoteMappingTemplate="{StaticResource DualNoteMappingTemplate}"
                                           CCMappingTemplate="{StaticResource CCMappingTemplate}"/>
    </UserControl.Resources>

    <DockPanel>
        <ContentControl Content="{Binding Title}" HorizontalAlignment="Left" DockPanel.Dock="Top" Height="45" />
        <Button Content="Save Settings"
                Command="{Binding SaveSettingsCommand}"
                Width="150" Margin="16"
                HorizontalAlignment="Left"
                DockPanel.Dock="Bottom" />

        <TabControl Margin="0 20 0 0"
                    Background="{DynamicResource PrimaryLightBrush}"
                    BorderBrush="{DynamicResource PrimaryHueLightBrush}"
                    materialDesign:ColorZoneAssist.Mode="PrimaryLight"
                    TabStripPlacement="Left"
                    Width="Auto">
            

            <!-- General Settings Tab -->
            <TabItem Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16 0 0 0">
                        <StackPanel Orientation="Horizontal" Margin="0 0 10 10">
                            <TextBlock Text="Nav to Dir on Launch" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding NavToDirOnLaunch}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Auto-Launch on Copy" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding AutoLaunchOnCopyEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Enable File Auto-Transfer" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding AutoFileCopyEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Watch Directory" Width="250" VerticalAlignment="Center"/>
                            <TextBox Text="{Binding WatchDirectoryLocation, Mode=TwoWay}" Width="400"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Enable Play Timer on Startup" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding PlayTimerEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Auto-Connect to TeensyROM" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding AutoConnectEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Auto-Launch File on Startup" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding StartupLaunchEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Mute on Fast Forward" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding MuteFastForward}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Mute on Random Seek" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding MuteRandomSeek}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Sync Favorites and Playlists" Width="250" VerticalAlignment="Center"/>
                            <CheckBox IsChecked="{Binding SyncFilesEnabled}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 10">
                            <TextBlock Text="Default Filter" Width="250" VerticalAlignment="Center"/>
                            <ComboBox ItemsSource="{Binding FilterOptions}"
                                      SelectedItem="{Binding StartupFilter}"
                                      Width="200" />
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- MIDI Settings Tab -->
            <TabItem Header="MIDI">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid>
                        <Grid Visibility="{Binding MidiConfigEnabled, Converter={StaticResource BoolToVisibilityConvertor}}">
                            <local:MidiSettingsView Grid.Row="0"
                                DataContext="{Binding LastCart.MidiSettings}"/>
                        </Grid>
                        

                        <TextBlock Grid.Row="0"
                                   Margin="10"
                                   Foreground="{StaticResource MaterialDesignValidationErrorBrush}"
                                   Visibility="{Binding MidiConfigEnabled, Converter={StaticResource InverseBoolToVisibilityConvertor}}">
                            
                            • You must connect to a TeensyROM cart to unlock MIDI settings.  
                            <LineBreak/>
                            <LineBreak/>
                            • Midi settings are uniquely saved per cart.
                            
                        </TextBlock>
                    </Grid>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </DockPanel>
</UserControl>