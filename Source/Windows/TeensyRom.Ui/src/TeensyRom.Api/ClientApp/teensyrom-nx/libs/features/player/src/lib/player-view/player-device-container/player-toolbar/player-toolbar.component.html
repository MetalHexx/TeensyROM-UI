@if (isPlayerLoaded()) {
  <div @slideDown>
    <lib-compact-card-layout>
      <div class="player-controls">
        <!-- Playback Controls Section -->
        <lib-icon-button
          icon="skip_previous"
          ariaLabel="Previous File"
          size="large"
          variant="rounded-transparent"
          [color]="getButtonColor()"
          [disabled]="!canNavigatePrevious()"
          (buttonClick)="previous()"
        >
        </lib-icon-button>

        <!-- Dynamic Play/Pause or Stop Button -->
        @if (isCurrentFileMusicType()) {
          <!-- Music files get play/pause toggle -->
          <lib-icon-button
            [icon]="getPlayPauseIcon()"
            [ariaLabel]="getPlayPauseLabel()"
            size="large"
            variant="rounded-primary"
            [color]="getButtonColor()"
            (buttonClick)="playPause()"
          >
          </lib-icon-button>
        } @else {
          <!-- Games/Images get stop button -->
          <lib-icon-button
            icon="stop"
            ariaLabel="Stop Playback"
            size="large"
            variant="rounded-primary"
            [color]="getButtonColor()"
            (buttonClick)="stop()"
          >
          </lib-icon-button>
        }

        <lib-icon-button
          icon="skip_next"
          ariaLabel="Next File"
          size="large"
          variant="rounded-transparent"
          [color]="getButtonColor()"
          [disabled]="!canNavigate()"
          (buttonClick)="next()"
        >
        </lib-icon-button>

        <!-- Shuffle Controls Section -->
        <lib-icon-button
          icon="shuffle"
          ariaLabel="Toggle Shuffle Mode"
          size="large"
          variant="rounded-transparent"
          [color]="isShuffleMode() ? 'highlight' : 'normal'"
          (buttonClick)="toggleShuffleMode()"
        >
        </lib-icon-button>
      </div>
    </lib-compact-card-layout>
  </div>
}
