<div class="directory-files">
  <lib-card-layout title="Directory Files">
    @if (directoryContents().isLoading) {
    <p>Loading directory contents...</p>
    } @else if (directoryContents().error) {
    <p class="error">Error: {{ directoryContents().error }}</p>
    } @else if (directoryContents().hasContent) {
    <table mat-table [dataSource]="combinedItems()" class="files-table">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let item">
          @if (isDirectory(item)) {
          <lib-directory-item
            [directoryItem]="item"
            [selected]="isSelected(item)"
            (itemSelected)="onItemSelected($event)"
            (itemDoubleClicked)="onDirectoryDoubleClick($event)"
          >
          </lib-directory-item>
          } @else {
          <lib-file-item
            [fileItem]="item"
            [selected]="isSelected(item)"
            (itemSelected)="onItemSelected($event)"
          >
          </lib-file-item>
          }
        </td>
      </ng-container>

      <ng-container matColumnDef="size">
        <th mat-header-cell *matHeaderCellDef>Size</th>
        <td mat-cell *matCellDef="let item"></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    } @else {
    <p>No directory selected or directory is empty.</p>
    }
  </lib-card-layout>
</div>
