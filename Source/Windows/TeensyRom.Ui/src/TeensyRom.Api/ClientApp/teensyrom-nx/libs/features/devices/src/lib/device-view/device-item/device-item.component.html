<mat-card class="device-card">
  <mat-card-header>
    <mat-card-title>
      {{ device()?.name }}
    </mat-card-title>
    <button mat-icon-button color="primary" class="power-fab" aria-label="Power">
      @if (!connectionStatus()) {
      <mat-icon
        (click)="onConnect()"
        [ngClass]="{ success: connectionStatus(), error: !connectionStatus() }"
      >
        power_settings_new
      </mat-icon>
      } @else {
      <mat-icon
        (click)="onDisconnect()"
        [ngClass]="{ success: connectionStatus(), error: !connectionStatus() }"
      >
        power_settings_new
      </mat-icon>
      }
    </button>
  </mat-card-header>
  <mat-card-content>
    <div class="device-content">
      <div class="device-info">
        <lib-icon-label
          icon="tag"
          [label]="'Device ID: ' + (device()?.deviceId ?? '')"
        ></lib-icon-label>
        <lib-icon-label
          icon="developer_board"
          [label]="'Firmware: ' + (device()?.fwVersion ?? '')"
        ></lib-icon-label>
        <lib-icon-label icon="usb" [label]="'Port: ' + (device()?.comPort ?? '')"></lib-icon-label>
        <lib-icon-label
          icon="verified_user"
          [label]="'Compatible: ' + (device()?.isCompatible ? 'Yes' : 'No')"
        ></lib-icon-label>
      </div>
      <div class="device-storage">
        <lib-storage-status
          icon="usb"
          label="USB Stick"
          [status]="usbStatus()"
        ></lib-storage-status>
        <lib-storage-status
          icon="sd_card"
          label="SD Card"
          [status]="sdStatus()"
        ></lib-storage-status>
      </div>
    </div>
  </mat-card-content>
</mat-card>
